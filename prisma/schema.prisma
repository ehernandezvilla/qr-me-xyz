generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model qr_history {
  id           Int       @id @default(autoincrement())
  username     String    @db.VarChar(100)
  original_url String    @db.Text
  short_url    String    @db.Text
  correlativo  String?   @db.VarChar(100)
  created_at   DateTime? @default(now()) @db.Timestamp(0)
  qr_svg       String?   @db.MediumText
}

model yprezq_log {
  click_id     Int      @id @default(autoincrement())
  click_time   DateTime @db.DateTime(0)
  shorturl     String   @db.VarChar(100)
  referrer     String   @db.VarChar(200)
  user_agent   String   @db.VarChar(255)
  ip_address   String   @db.VarChar(41)
  country_code String   @db.Char(2)

  @@index([shorturl], map: "shorturl")
}

model yprezq_options {
  option_id    BigInt @default(autoincrement()) @db.UnsignedBigInt
  option_name  String @default("") @db.VarChar(64)
  option_value String @db.LongText

  @@id([option_id, option_name])
  @@index([option_name], map: "option_name")
}

model yprezq_url {
  keyword   String   @id @default("") @db.VarChar(100)
  url       String   @db.Text
  title     String?  @db.Text
  timestamp DateTime @default(now()) @db.Timestamp(0)
  ip        String   @db.VarChar(41)
  clicks    Int      @db.UnsignedInt

  @@index([ip], map: "ip")
  @@index([timestamp], map: "timestamp")
}
